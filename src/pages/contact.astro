---
import '../styles/GlobalStyles.astro';

import { Icon } from 'astro-icon/components';
import PageLayout from 'src/layouts/PageLayout.astro';

import VerMas from '../components/buttons/VerMas';
---

<PageLayout title="Contacto">
	<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	<link
		rel="stylesheet"
		href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
		integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
		crossorigin=""
	/>
	<script
		src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
		integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
		crossorigin=""></script>
	<main class="mx-auto w-[90%] mb-20">
		<h1 class="text-[90px] uppercase font-extrabold leading-none mt-20 font-raleway">
			Entonces,<br />
			<span>¿Cuando Empezamos?</span>
		</h1>
		<div class="flex justify-between mt-20">
			<div class="w-1/3 space-y-5">
				<div class="space-y-5">
					<p>
						Estamos disponibles para conversar en cualquier momento, solo dí las inquietudes que tengas y
						podremos empezar con una productiva cooperación.
					</p>
					<div>
						<p>Llámanos: +593 97 870 1954</p>
						<p>Di Hola: contact@laboralistas.com</p>
					</div>
				</div>
				<div class="flex gap-2">
					<a
						href=""
						class="w-10 h-10 rounded-full border-solid border-black border-[1px] flex items-center justify-center"
						><Icon name="fa:facebook" width={22} height={22} /></a
					>
					<a
						href=""
						class="w-10 h-10 rounded-full border-solid border-black border-[1px] flex items-center justify-center"
						><Icon name="fa:twitter" width={22} height={22} /></a
					>
					<a
						href=""
						class="w-10 h-10 rounded-full border-solid border-black border-[1px] flex items-center justify-center"
						><Icon name="fa:instagram" width={22} height={22} /></a
					>
					<a
						href=""
						class="w-10 h-10 rounded-full border-solid border-black border-[1px] flex items-center justify-center"
						><Icon name="ic:baseline-tiktok" width={24} height={24} /></a
					>
				</div>
			</div>
			<div class="w-2/3">
				<!-- mailto form -->
				<form id="form" method="post" enctype="text/plain">
					<div class="flex flex-col space-y-5 ml-32">
						<div class="flex space-x-5">
							<input
								type="text"
								placeholder="Nombre"
								class="w-1/2 border-solid border-[1px] border-black bg-white text-black py-3 px-5 uppercase placeholder-black text-3xl rounded-full outline-accent"
								required
							/>
							<input
								type="email"
								placeholder="Email"
								class="outline-accent w-1/2 border-solid border-[1px] border-black bg-white text-black py-3 px-5 uppercase placeholder-black text-3xl rounded-full"
								required
							/>
						</div>
						<textarea
							name="message"
							id="message"
							cols="15"
							rows="3"
							class="outline-accent w-full border-solid border-[1px] border-black bg-white text-black py-3 px-5 uppercase placeholder-black text-3xl rounded-3xl"
							required
							placeholder="Mensaje"></textarea>
						<div class="w-full space-y-5">
							<div
								class="g-recaptcha"
								data-sitekey="6LeW3JYpAAAAAOsIBGLl4LMwwlTj-ezdtn3-43Aa"
								aria-required="true"
							>
							</div>
							<button type="submit" class="uppercase g-recaptcha" form="form">
								<VerMas
									className="active:pointer-events-none text-white"
									textoBoton="Enviar Mensaje"
									opcion="1"
									tamanoTexto="1.25rem"
									client:only
								/>
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</main>
	<div class="flex h-[50vh] bg-accent text-white">
		<div class="w-1/2 h-full p-12">
			<h1 class="text-6xl font-bold text-white font-raleway">Tambien puedes encontrarnos en</h1>
			<ul class="py-8 space-y-4 text-xl">
				<li class="flex gap-2">
					<Icon name="mdi:location" width={24} height={24} />
					<a
						href="https://maps.app.goo.gl/EFaY9HRsVecDZQP56"
						rel="noopener noreferrer"
						target="_blank"
						class="hover:underline">Quito, Tarqui N15-26 y Estrada. Edificio CEOSL, Oficina 303.</a
					>
				</li>
				<li class="flex gap-2">
					<Icon name="ri:whatsapp-fill" width={24} height={24} />
					<p>+593 97 870 1954</p>
				</li>
			</ul>
		</div>
		<div class="map flex items-center justify-start flex-col relative w-1/2 h-full">
			<div id="map" class="w-full h-full absolute"></div>
		</div>
	</div>
	<script is:inline>
		const form = document.getElementById('form');

		// check captcha and then submit form
		function submitForm() {
			var response = grecaptcha.getResponse();
			if (response.length === 0) {
				//reCaptcha not verified
				alert('Porfavor realiza el recaptcha');
				throw new Error('reCaptcha not verified');
			} else {
				//reCaptch verified
				form.submit();
				const formData = new FormData(form);
				console.log(formData);
				return true;
			}
		}

		// add event listener to form
		form?.addEventListener('submit', function (e) {
			e.preventDefault();
			submitForm();
		});
	</script>
	<!-- load map -->
	<script>
		import L from 'leaflet';

		const map = L.map('map', {
			center: L.latLng(-0.2116386890466515, -78.50104621226804),
			zoom: 19,
		});

		L.tileLayer(
			'https://tile.jawg.io/43ff1fc3-c508-49ac-92f4-4b8e2d3f2879/{z}/{x}/{y}{r}.png?access-token=ZcSDwOJjXNo8Xdhp57wntKYIwDHVQijtCMMEozURgOzdDEV5unT5poXnRbJbHGFN',
			{
				maxZoom: 19,
			},
		).addTo(map);
		map.attributionControl.addAttribution(
			'<a href="https://www.jawg.io?utm_medium=map&utm_source=attribution" target="_blank">&copy; Jawg</a> - <a href="https://www.openstreetmap.org?utm_medium=map-attribution&utm_source=jawg" target="_blank">&copy; OpenStreetMap</a>&nbsp;contributors',
		);
	</script></PageLayout
>
